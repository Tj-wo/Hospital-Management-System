<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core">
<h:head>
    <title>Manage Staff</title>
</h:head>
<h:body>
    <h:form id="staffForm">
        <div class="card">
            <p:growl id="messages" showDetail="true" life="6000"/>
            <p:dataTable id="staffTable" var="staff" value="#{staffBean.staffList}" paginator="true" rows="10" emptyMessage="No staff members found.">
                <f:facet name="header">
                    <div style="display: flex; justify-content: space-between;">
                        <span>Staff Members</span>
                        <p:commandButton value="New Staff" icon="pi pi-plus"
                                         actionListener="#{staffBean.prepareNewStaff}"
                                         oncomplete="PF('staffDialog').show()" update=":dialogForm"/>
                    </div>
                </f:facet>
                <p:column headerText="Name"><h:outputText value="#{staff.fullName}"/></p:column>
                <p:column headerText="Role">
                    <p:tag value="#{staff.role}" severity="#{staff.role == 'DOCTOR' ? 'info' : staff.role == 'NURSE' ? 'success' : 'warning'}"/>
                </p:column>
                <p:column headerText="Email"><h:outputText value="#{staff.email}"/></p:column>
                <p:column headerText="Specialty">
                    <h:outputText value="#{staff.specialty != null ? staff.specialty : 'N/A'}"/>
                </p:column>
                <p:column headerText="Actions" style="width:6rem; text-align:center">
                    <p:commandButton icon="pi pi-trash" styleClass="rounded-button ui-button-danger"
                                     actionListener="#{staffBean.deleteStaff}" update="staffForm">
                        <f:setPropertyActionListener value="#{staff}" target="#{staffBean.selectedStaff}"/>
                        <p:confirm header="Confirmation" message="Delete #{staff.fullName}?" icon="pi pi-exclamation-triangle"/>
                    </p:commandButton>
                </p:column>
            </p:dataTable>
        </div>
    </h:form>
</h:body>
</html>
